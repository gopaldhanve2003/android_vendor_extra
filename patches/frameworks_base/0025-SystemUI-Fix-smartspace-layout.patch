From 5fa303cb3872eb92a38dc05ff23d2bc69ce8ff90 Mon Sep 17 00:00:00 2001
From: Pranav Vashi <neobuddy89@gmail.com>
Date: Thu, 9 Jan 2025 00:21:31 +0530
Subject: [PATCH 25/28] SystemUI: Fix smartspace layout

Change-Id: If3a3bd1908c566b8a2d9195fbac75b6ecbdf9a9b
Signed-off-by: Pranav Vashi <neobuddy89@gmail.com>
---
 .../systemui/keyguard/ui/view/layout/sections/ClockSection.kt | 4 +---
 .../keyguard/ui/view/layout/sections/SmartspaceSection.kt     | 2 +-
 2 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/ClockSection.kt b/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/ClockSection.kt
index 70bf8bca55b9..4e13b783aa27 100644
--- a/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/ClockSection.kt
+++ b/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/ClockSection.kt
@@ -131,9 +131,7 @@ constructor(
             setVisibility(getNonTargetClockFace(clock).views, GONE)
             setAlpha(getTargetClockFace(clock).views, 1F)
             setAlpha(getNonTargetClockFace(clock).views, 0F)
-            if (!keyguardClockViewModel.isLargeClockVisible.value) {
-                connect(sharedR.id.bc_smartspace_view, TOP, sharedR.id.date_smartspace_view, BOTTOM)
-            } else {
+            if (keyguardClockViewModel.isLargeClockVisible.value) {
                 setScaleX(getTargetClockFace(clock).views, aodBurnInViewModel.movement.value.scale)
                 setScaleY(getTargetClockFace(clock).views, aodBurnInViewModel.movement.value.scale)
             }
diff --git a/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/SmartspaceSection.kt b/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/SmartspaceSection.kt
index 46027f9aa185..0e7d395130df 100644
--- a/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/SmartspaceSection.kt
+++ b/packages/SystemUI/src/com/android/systemui/keyguard/ui/view/layout/sections/SmartspaceSection.kt
@@ -166,7 +166,7 @@ constructor(
                 connect(
                     sharedR.id.bc_smartspace_view,
                     ConstraintSet.TOP,
-                    sharedR.id.date_smartspace_view,
+                    R.id.lockscreen_clock_view,
                     ConstraintSet.BOTTOM,
                 )
             }
-- 
2.49.0

